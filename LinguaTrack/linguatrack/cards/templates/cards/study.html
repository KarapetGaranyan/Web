{% extends 'cards/base.html' %}

{% block title %}–ò–∑—É—á–µ–Ω–∏–µ - LinguaTrack{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å -->
        <div class="mb-4">
            <div class="d-flex justify-content-between align-items-center">
                <h2>üéØ –ò–∑—É—á–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫</h2>
                <span class="badge bg-info">{{ studied_count }}/{{ total_count }}</span>
            </div>
            <div class="progress">
                <div class="progress-bar" role="progressbar" 
                     style="width: {% widthratio studied_count total_count 100 %}%">
                </div>
            </div>
        </div>

        <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ -->
        <div class="card study-card mb-4">
            <div class="card-body text-center">
                <div class="mb-3">
                    <span class="badge bg-secondary">{{ card.get_difficulty_display }}</span>
                </div>
                
                <h1 class="display-4 mb-4">{{ card.word }}</h1>
                
                {% if card.example and not show_result %}
                    <p class="text-muted">
                        <em>{{ card.example }}</em>
                    </p>
                {% endif %}
                
                {% if show_result %}
                    <!-- –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç -->
                    <div class="alert {% if is_correct %}alert-success{% else %}alert-danger{% endif %}">
                        <h4>
                            {% if is_correct %}
                                ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ!
                            {% else %}
                                ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
                            {% endif %}
                        </h4>
                        <p><strong>–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç:</strong> {{ card.translation }}</p>
                        <p><strong>–í–∞—à –æ—Ç–≤–µ—Ç:</strong> {{ user_answer }}</p>
                    </div>
                    
                    {% if card.example %}
                        <div class="mt-3">
                            <strong>–ü—Ä–∏–º–µ—Ä:</strong>
                            <p class="text-muted">{{ card.example }}</p>
                        </div>
                    {% endif %}
                    
                    <a href="{% url 'cards:next_card' %}" class="btn btn-primary btn-lg">
                        –°–ª–µ–¥—É—é—â–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ ‚Üí
                    </a>
                {% else %}
                    <!-- –§–æ—Ä–º–∞ –æ—Ç–≤–µ—Ç–∞ -->
                    <form method="post">
                        {% csrf_token %}
                        <div class="mb-3">
                            {{ form.answer }}
                        </div>
                        <button type="submit" class="btn btn-success btn-lg">
                            –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
                        </button>
                    </form>
                {% endif %}
            </div>
        </div>
        
        <div class="text-center">
            <a href="{% url 'cards:card_list' %}" class="btn btn-outline-secondary">
                ‚¨ÖÔ∏è –ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–∑—É—á–µ–Ω–∏–µ
            </a>
        </div>
    </div>
</div>
{% endblock %}