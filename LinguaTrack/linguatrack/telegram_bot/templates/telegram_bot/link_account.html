{% extends 'cards/base.html' %}

{% block title %}–ü—Ä–∏–≤—è–∑–∞—Ç—å Telegram - LinguaTrack{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h3>ü§ñ –ü—Ä–∏–≤—è–∑–∞—Ç—å Telegram –∞–∫–∫–∞—É–Ω—Ç</h3>
            </div>
            <div class="card-body">
                <div class="alert alert-info">
                    <h5>üë§ –í–∞—à –∞–∫–∫–∞—É–Ω—Ç: <strong>{{ user.username }}</strong></h5>
                    <p>–≠—Ç–æ—Ç —Ç–æ–∫–µ–Ω –ø—Ä–∏–≤—è–∂–µ—Ç –≤–∞—à Telegram –∏–º–µ–Ω–Ω–æ –∫ —ç—Ç–æ–º—É –∞–∫–∫–∞—É–Ω—Ç—É.</p>
                </div>

                <p>–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–æ—Ç–∞ –≤ Telegram –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:</p>

                <div class="alert alert-primary">
                    <h5>–®–∞–≥ 1: –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞</h5>
                    <p>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞: <strong>@{{ bot_username }}</strong></p>
                    <a href="https://t.me/{{ bot_username }}" target="_blank" class="btn btn-primary btn-sm">
                        –û—Ç–∫—Ä—ã—Ç—å –≤ Telegram
                    </a>
                </div>

                <div class="alert alert-warning">
                    <h5>–®–∞–≥ 2: –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É –ø—Ä–∏–≤—è–∑–∫–∏</h5>
                    <p>–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —ç—Ç—É –∫–æ–º–∞–Ω–¥—É –±–æ—Ç—É:</p>
                    <div class="input-group mb-2">
                        <input type="text" class="form-control" id="linkCommand"
                               value="{{ link_command }}" readonly>
                        <button class="btn btn-outline-secondary" onclick="copyCommand()">
                            üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
                        </button>
                    </div>
                    <small class="text-muted">‚è∞ –¢–æ–∫–µ–Ω –¥–µ–π—Å—Ç–≤—É–µ—Ç 10 –º–∏–Ω—É—Ç</small>
                </div>

                <div class="alert alert-success">
                    <h5>–®–∞–≥ 3: –ù–∞—á–Ω–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ—Ç–∞</h5>
                    <p>–ü–æ—Å–ª–µ –ø—Ä–∏–≤—è–∑–∫–∏ –≤—ã —Å–º–æ–∂–µ—Ç–µ:</p>
                    <ul>
                        <li>–ü–æ–ª—É—á–∞—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–∏</li>
                        <li>–ò–∑—É—á–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏ –≤ Telegram</li>
                        <li>–ü—Ä–æ—Ö–æ–¥–∏—Ç—å –±—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã</li>
                        <li>–ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É</li>
                    </ul>
                </div>

                <div class="text-center">
                    <form method="post" style="display: inline;">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-warning">
                            üîÑ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω
                        </button>
                    </form>

                    <a href="{% url 'cards:card_list' %}" class="btn btn-secondary">
                        ‚¨ÖÔ∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∫–∞—Ä—Ç–æ—á–∫–∞–º
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function copyCommand() {
    const commandInput = document.getElementById('linkCommand');
    commandInput.select();
    commandInput.setSelectionRange(0, 99999);
    document.execCommand('copy');

    const button = event.target;
    const originalText = button.textContent;
    button.textContent = '‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
    button.classList.add('btn-success');
    button.classList.remove('btn-outline-secondary');

    setTimeout(() => {
        button.textContent = originalText;
        button.classList.remove('btn-success');
        button.classList.add('btn-outline-secondary');
    }, 2000);
}

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∏–≤—è–∑–∫–∏
setTimeout(() => {
    location.reload();
}, 30000);
</script>
{% endblock %}